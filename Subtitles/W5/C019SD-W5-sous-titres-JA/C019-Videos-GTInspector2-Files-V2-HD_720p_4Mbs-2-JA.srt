1
00:00:02,030 --> 00:00:03,770
このビデオでは、Pharoの良さの1面である

2
00:00:03,937 --> 00:00:06,700
インスペクターをお見せします。

3
00:00:07,170 --> 00:00:10,610
インスペクターはオブジェクトとの対話を
可能にするツールで

4
00:00:10,777 --> 00:00:14,190
オブジェクトとライブ感のある話し合い
をすることができます。

5
00:00:15,250 --> 00:00:17,690
ファイルシステムを例に試してみましょう。

6
00:00:19,520 --> 00:00:21,450
例えば
FileSystem　workingDirectory

7
00:00:24,330 --> 00:00:29,130
とすると

8
00:00:29,297 --> 00:00:32,190
例えば私のイメージが格納されている場所にある

9
00:00:32,357 --> 00:00:33,870
全てのファイルを取得できます。

10
00:00:35,030 --> 00:00:39,610
少し見てみましょう。
inspect すると

11
00:00:40,030 --> 00:00:41,240
インスペクターが開きます。

12
00:00:41,870 --> 00:00:43,240
これでインスペクターを使うことができます。

13
00:00:45,430 --> 00:00:47,690
これは Pharo の新しいインスペクターで

14
00:00:47,857 --> 00:00:51,730
GT チームが開発しました。

15
00:00:51,897 --> 00:00:53,140
とても面白い機能を持っています。

16
00:00:53,307 --> 00:00:56,740
では始めに、Raw と書かれたタブを

17
00:00:58,330 --> 00:00:59,640
見てみましょう。

18
00:00:59,807 --> 00:01:03,880
Raw タブは旧来のインスペクターです。

19
00:01:04,047 --> 00:01:04,850
何を見ることができるでしょう？

20
00:01:05,017 --> 00:01:08,000
オブジェクトのデータ、つまり
クラスで定義された

21
00:01:08,167 --> 00:01:09,710
オブジェクトのインスタンス変数などを
見ることができます。

22
00:01:10,420 --> 00:01:12,480
オブジェクトと対話することができます。

23
00:01:12,647 --> 00:01:15,930
例えば全てのエントリーを
問い合わせることができます。

24
00:01:16,530 --> 00:01:20,940
こうやって全てのエントリーを取得したり
全てのディレクトリを取得したりできます。

25
00:01:21,107 --> 00:01:25,850
例えば、こうやって
全てのディレクトリを取得します。

26
00:01:27,880 --> 00:01:31,380
そのオブジェクトのクラスを

27
00:01:31,547 --> 00:01:36,240
self browse で見ると
何が見えるでしょう？

28
00:01:36,407 --> 00:01:40,430
このビューではオブジェクトの値

29
00:01:41,250 --> 00:01:44,450
つまりクラスで定義されたインスタンス変数を

30
00:01:44,617 --> 00:01:46,100
見ることができます。

31
00:01:47,520 --> 00:01:49,820
これを使うことでオブジェクトの中身を
見ることができます。

32
00:01:50,000 --> 00:01:54,650
例えば、ここで path は実際には

33
00:01:55,350 --> 00:01:59,530
このオブジェクト self でできていて
ここで見ることができます。

34
00:01:59,697 --> 00:02:03,660
まだ Raw モード です。

35
00:02:03,827 --> 00:02:04,800
中身を見ることができます。

36
00:02:05,000 --> 00:02:07,550
こうすると、文字列 User などなどを

37
00:02:07,717 --> 00:02:09,780
見ていくことができます。

38
00:02:09,947 --> 00:02:13,280
ここでは、カプセル化に根本的に違反しています。

39
00:02:15,210 --> 00:02:18,250
システムは振る舞いを内観的に見て

40
00:02:18,417 --> 00:02:21,290
フィールドの値を見せてくれます。

41
00:02:23,000 --> 00:02:23,920
このビューはとても便利です。

42
00:02:24,087 --> 00:02:28,540
しかし、新しいインスペクターは
もっと多くのことをしてくれます。

43
00:02:28,707 --> 00:02:33,310
それぞれのオブジェクトがユーザーに

44
00:02:34,150 --> 00:02:38,820
そのオブジェクトをどう表現するかについて
異なる切り口(ファセット)を示してくれます。

45
00:02:40,700 --> 00:02:44,880
デフォルトでは、それぞれのオブジェクトは
Raw ファセットを持っています。

46
00:02:45,300 --> 00:02:47,900
また、クラスをブラウズすることができる

47
00:02:48,067 --> 00:02:49,310
Meta ファセットも持っています。

48
00:02:49,477 --> 00:02:51,380
例えば、こんな風にして
クラスを素早くブラウズすることができます。

49
00:02:52,150 --> 00:02:55,330
ナビゲーションのフローに乗っていて

00:02:55,590 --> 00:03:00,440
他のブラウザを開くことなく
直接クラスを見たい時に

51
00:03:00,607 --> 00:03:01,350
便利です。

52
00:03:01,650 --> 00:03:03,140
しかし、他のタブはさらに重要です。

53
00:03:03,307 --> 00:03:08,090
この例では

54
00:03:08,257 --> 00:03:11,640
インスペクターはこれが参照で

55
00:03:13,470 --> 00:03:17,730
ディレクトリだとわかっていて
そのディレクトリ中の全てを表示するのです。

56
00:03:17,900 --> 00:03:19,690
これがさきほど実行した時に見せたものです。

57
00:03:20,270 --> 00:03:21,960
ここで、同じものが得られます。

58
00:03:26,190 --> 00:03:31,140
さあ、このファイルシステムの内部を

59
00:03:31,307 --> 00:03:32,180
ブラウズすることができます。

60
00:03:32,347 --> 00:03:36,090
Ston（Pharoで使うJSON相当なもの）を

61
00:03:36,460 --> 00:03:40,920
選択すると今度は

62
00:03:41,087 --> 00:03:45,780
ファイルシステム中のファイルへの参照が

63
00:03:46,280 --> 00:03:51,110
得られて、meta-inf.ston という名前の

64
00:03:51,277 --> 00:03:52,500
ファイルにアクセスできます。

65
00:03:52,667 --> 00:03:57,270
そしてインスペクターは賢いので

66
00:03:57,437 --> 00:04:00,390
「必要なら内容を表示できますよ」
と言ってきます。

67
00:04:01,000 --> 00:04:02,940
内容を見ると

68
00:04:03,107 --> 00:04:06,020
何なのかよくわかりませんが
ともかく内容を見ることができます。

69
00:04:07,210 --> 00:04:11,070
同じ方法でサブフォルダを
ブラウズすることもできます。

70
00:04:11,237 --> 00:04:14,950
ここで package-cache を選択すると
これはパッケージが一旦保存される

71
00:04:15,117 --> 00:04:16,180
デフォルトの場所なのですが

72
00:04:16,347 --> 00:04:19,160
これはファイルシステムのオブジェクトですが

73
00:04:19,327 --> 00:04:21,760
その内容を見ることができます。

74
00:04:22,540 --> 00:04:26,880
data を見ると

75
00:04:30,210 --> 00:04:33,740
PNGがあります。
1つPNGをクリックするとブラウズできます。

76
00:04:34,040 --> 00:04:36,760
ここで見ての通り、他にもタブがあります。

77
00:04:38,030 --> 00:04:38,680

78
00:04:39,500 --> 00:04:41,540
Content をクリックすると

79
00:04:41,707 --> 00:04:44,550
PNGがディスク上のバイナリフォーマットで
保存されていて

80
00:04:47,300 --> 00:04:50,460
PNGなのでインスペクターは

81
00:04:50,627 --> 00:04:53,570
PNGの中身のプレビューを表示します。

82
00:04:53,737 --> 00:04:55,140
例えば script.st を見ると

83
00:04:55,307 --> 00:04:58,510
複数のビューがあります。

84
00:04:58,677 --> 00:05:00,740
この場合、2 つあります。
よくわかりませんが

85
00:05:00,907 --> 00:05:03,150
1 つは構文ハイライトされていて

86
00:05:03,317 --> 00:05:05,400
もう 1 つは構文ハイライトなしで
内容を表示しています。

87
00:05:06,050 --> 00:05:09,470
ZIP ファイルの場合にはさらに便利で

88
00:05:09,637 --> 00:05:14,520
ZIPの内容はエンコードされ
圧縮されていますが

89
00:05:14,687 --> 00:05:19,100
ZIP中のアイテムを

90
00:05:19,267 --> 00:05:22,920
直接ブラウズすることができます。

91
00:05:24,240 --> 00:05:26,080
再帰的に同じ方法で見ていくことができます。

92
00:05:29,730 --> 00:05:34,300
ここまで、Pharo のインスペクターが

93
00:05:34,467 --> 00:05:37,400
とてもパワフルなツールだということを
示してきました。

94
00:05:37,567 --> 00:05:42,160
オブジェクトと精密に対話し

95
00:05:42,327 --> 00:05:45,430
各オブジェクトがその表現方法を決め

96
00:05:45,597 --> 00:05:48,840
最も効率的に対話するために

97
00:05:49,007 --> 00:05:51,270
意味のある表現方法を提供します。

98
00:05:51,550 --> 00:05:53,820
これにより、簡単なツールをとても
素早く作ることができます。

99
00:05:54,000 --> 00:05:56,940
どうして、インスペクタにファイルシステムの
簡単なブラウザがあるのでしょう？

100
00:05:57,107 --> 00:05:59,270
ファイルシステムをブラウズし
インスペクトする時には

101
00:05:59,510 --> 00:06:01,890
インスペクトしている対象について

102
00:06:02,057 --> 00:06:02,840
正確に知りたいということなのです。
